<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guessing Game!</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="../Guessing Game/assets/script.js"></script>

</head>

<body>
    <div class="header-container">
        <h1>True or <br>False?</h1>
    </div>
    <div id="timer">
        <p id="timer-center">15</p>
    </div>

    <div class="score-container">

        <div class="score-counter">Score: <span id="score-tally">0</span></div>
        <div class="high-score-counter">High Score: <span id="high-score-tally">0</span></div>
    </div>

    <div class="body-container">
        <div id="question-box">
            <p>Question:<span id="update-question"></span></p>

            <div id="question-response"></div>
        </div>
        <div id="true-box" class="btn">
            <p>True!</p>
        </div>

        <div id="false-box" class="btn">
            <p>False!</p>
        </div>

    </div>

    <script>

        const trueBtn = document.getElementById('true-box');
        const falseBtn = document.getElementById('false-box');
        const nextBtn = document.getElementById('next-question');
        const response = document.getElementById('question-response');
        const scoreTally = document.getElementById('score-tally');

        var sec = 15;

        trueBtn.addEventListener('click', function () {
            qCheck(true)
            console.log("true button")
        });

        falseBtn.addEventListener('click', function () {
            qCheck(false)
            console.log("false button")
        });

        var currentQuestion = 0;
        var score = 0;

        var questions = [{
            "question": " Is the black box in a plane is actually black?",
            "answer": false,
            "response": "False! They are actually orange"
        }, {
            "question": " Is Alliumphobia is a fear of garlic?",
            "answer": true,
            "response": "True! Alliumphobia is indeed a fear of garlic"
        }, {
            "question": " is the atomic number for lithium no. 17",
            "answer": false,
            "response": "False! Lithiums atomic number is 3"
        }, {
            "question": " Does broccoli contain more vitamin C than lemons?",
            "answer": true,
            "response": " True! Broccoli contains 89 mg of vitamin C per 100 grams, while lemons contain only 77 mg of vitamin C per 100 grams."
        }];

        (function () {
            fnReset();
            console.log("im working")
        })();

        function fnReset() {
            currentQuestion = 0;
            document.getElementById('update-question').innerHTML = questions[currentQuestion].question;
        }

        function qCheck(answer) {
            var questionAnswer = questions[currentQuestion].answer;
            console.log("in the right place")
            if (questionAnswer === answer) {
                // show Correct
                pause();
                console.log("you were correct");
                score++;
                scoreTally.innerText = score;
                response.innerText = questions[currentQuestion].response
                fade();
                setTimeout(nextQuestion, 5000)
            }
            else {
                // show incorrect and reset current score
                console.log("you were wrong");
                pause();
                highScore();
                score = 0;
                scoreTally.innerText = score;
                response.innerText = questions[currentQuestion].response
                fade();
                setTimeout(nextQuestion, 5000)
            }
        }

        function nextQuestion() {
            console.log("Going to text Question!")
            sec = 15;

            response.innerText = ""
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                console.log(currentQuestion)
            } else {
                alert("Sorry no more");
            }
            document.getElementById('update-question').innerHTML = questions[currentQuestion].question;

        }
        function highScore() {
            console.log(score)
            var highScore = 0;
            if (score > highScore) {
                highScore = score;
                console.log(highScore)
                document.getElementById('high-score-tally').innerText = highScore;
            }
        }

        var timer;
        var ele = document.getElementById('timer-center');


        function clock() {
            timer = setInterval(() => {
                ele.innerHTML = sec;
                sec -= 1;
                if (sec === -1) {
                    qCheck(null);
                    score = 0;
                    scoreTally.innerText = score;
                    sec = 15;
                }
            }, 1000);
        }

        function pause() {
            clearInterval(timer);
            sec = 5
            console.log("??")
            clock();
        }

        clock();

        let textUpdate = document.getElementById('question-response');
        
        function fade(){
            textUpdate.classList.toggle("fade")
            console.log("Fading")

        }

    </script>

</html>